
@{
    ViewData["Title"] = "statistics";
    Layout = "~/Areas/Admin/Views/AdvancedSearch/_Layout.cshtml";
}

<div id="wrapper">
    <button onclick="closeTab()" value="BACK" class="btn btn-primary ui submit button">Go Back</button>
</div>

<div class="container">
    <div class="row">
        <div class="col-xs-6">
            <canvas id="myChart" width="200" height="200"></canvas>
        </div>
        
    </div>
</div>

<div id="wrapper">
    <button onclick="closeTab()" value="BACK" class="btn btn-primary ui submit button">Go Back</button>
</div>


<style>
    .afisareCodContainer {
        margin-top: 5%;
    }

    .afisareButon {
        margin-top: 5%;
    }

    #wrapper {
        display: flex;
        justify-content: center;
    }
</style>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

<script>
    function closeTab() {
        if (confirm("Close Tab?")) {
            close();
        }

    }
    window.onload = incarcareChart;

    function incarcareChart() {
        var k;
        var m;
        $.ajax({
            type: "GET",
            url: '/charts/searchesStatisticsCautareUnCuvant',
            data: {
            },
            async: false,
            success: function (date) {
                k = date;
            },
            error: function (error) {
                alert(error);
            }
        });

        $.ajax({
            type: "GET",
            url: '/charts/searchesStatisticsCautareMultipla',
            data: {
            },
            async: false,
            success: function (date) {
                m = date;
            },
            error: function (error) {
                alert(error);
            }
        });

        var ctx = document.getElementById("myChart");
        var myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                
                datasets: [{
                    fill: false,
                    lineTension: 0,
                    backgroundColor: [
                        "rgba(75,192,192,0.4)", 'black',
                        'grey',
                        'lightgrey'
                    ],
                    borderColor: "rgba(75,192,192,1)",
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJointStyle: 'miter',
                    data: Object.values(k),
                    labels: Object.keys(k),
                }, {
                        fill: false,
                        lineTension: 0,
                        backgroundColor: [
                            "rgba(75,192,192,0.4)", 'black',
                            'grey',
                            'lightgrey'
                        ],
                        borderColor: "rgba(75,192,192,1)",
                        borderCapStyle: 'butt',
                        borderDash: [],
                        borderDashOffset: 0.0,
                        borderJointStyle: 'miter',
                        data: Object.values(m),
                        labels: Object.keys(m),
                },]
            },
            options: {
                responsive: true,
                legend: {
                    display: false,
                },
                tooltips: {
                    callbacks: {
                        label: function (tooltipItem, data) {
                            var dataset = data.datasets[tooltipItem.datasetIndex];
                            var index = tooltipItem.index;
                            return dataset.labels[index] + ': ' + dataset.data[index];
                        }
                    }
                }
            }
        });
    }

</script>

